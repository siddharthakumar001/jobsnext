{% extends "layouts/base.html" %}

{% block title %} My Job Applications {% endblock %}
{% load static %}
{% block stylesheets %}
<!-- Add any specific CSS styles if needed -->
{% endblock %}

{% block body_class %} jobs-status-page bg-gray-200 {% endblock %}

{% block content %}
    {% include 'includes/navigation.html' %}

    <header class="header-2">
        <div class="page-header min-vh-50" style="background-image: url('{% static 'img/bg-profile.jpg' %}');" loading="lazy">
            <span class="mask bg-gradient-info opacity-4"></span>
            <div class="container">
                <div class="row">
                    <div class="col-lg-7 text-center mx-auto">
                        <h1 class="text-white pt-3 mt-n5">My Job Applications</h1>
                        <p class="lead text-white mt-3">Track the status of your job applications here.</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="card card-body blur shadow-blur mx-3 mx-md-4 mt-n6">
        <section class="pt-5 pb-4" id="job-applications">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h2 class="mt-4">My Job Applications</h2>
                        {% if applied_jobs %}
                            <table class="table table-striped mt-3">
                                <thead>
                                    <tr>
                                        <th>Job Title</th>
                                        <th>Recruiter</th>
                                        <th>Status</th>
                                        <th>Applied Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for application in applied_jobs %}
                                        <tr>
                                            <td>{{ application.job.title }}</td>
                                            <td>{{ application.job.recruiter.username }}</td>
                                            <td>{{ application.get_status_display }}</td> <!-- Correct status display -->
                                            <td>{{ application.applied_at }}</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        {% else %}
                            <p class="mt-3">You have not applied for any jobs yet.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </section>

        {% include 'includes/footer.html' %}
    </div>
{% endblock content %}

{% block javascripts %}
<!-- Add any specific JavaScript if needed -->
{% endblock %}